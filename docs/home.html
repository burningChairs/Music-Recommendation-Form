{% extends "layout.html" %}

{% block content %}
<div class="text-center">
    <h1>Music Recommendations - Genres</h1>
    <p class="lead">Hi, I'm Ann Jordan! I love music since I have always used it as a form of expression and inspiration. Here's a few genres that I love the most, please review them and then take this form to see what artist recommendations I would give to you.</p>

    <div class="row mt-4">
        <div class="col-md-4">
            <a href="{{ url_for('shoegaze') }}" class="genre-card shoegaze-card">
                <h3>Shoegaze</h3>
            </a>
        </div>
        <div class="col-md-4">
            <a href="{{ url_for('metal') }}" class="genre-card metal-card">
                <h3>Metal</h3>
            </a>
        </div>
        <div class="col-md-4">
            <a href="{{ url_for('emo') }}" class="genre-card emo-card">
                <h3>Emo</h3>
            </a>
        </div>
    </div>
</div>

<img src="{{ url_for('static', filename='images/cat.webp') }}" alt="Kitten with Headphones" class="img-fluid rounded shadow mb-4 homepage-image">
 <p class="text-center mt-2">
  <a href="https://www.redbubble.com/i/sticker/kitten-with-headphones-by-Swshi/147770403.EJUG5"
     target="_blank"
     class="custom-link">
     Artwork by Swshi on Redbubble
  </a>
</p>

<hr>
 
<h2 class="mt-5">Music Genre Form - For Recommendations</h2>
<p>Please review the genres above before filling out the form below.</p>

<form method="POST" action="{{ url_for('home') }}">
    <!-- Genres liked -->
    <div class="mb-3">
        <label><strong>Which genres do you like? (Select any)</strong></label><br>
        {% for genre in genres %}
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="liked_genres" id="genre_{{ loop.index }}" value="{{ genre }}" {% if genre in form_data.liked_genres %}checked{% endif %}>
                <label class="form-check-label" for="genre_{{ loop.index }}">{{ genre }}</label>
            </div>
        {% endfor %}
    </div>

    <!-- Compelling artists -->
    <div class="mb-3">
        <label for="compelling_artists" class="form-label"><strong>Which artists did you find most compelling? (Optional)</strong></label>
        <input type="text" class="form-control" id="compelling_artists" name="compelling_artists" placeholder="Artist names separated by commas" value="{{ form_data.compelling_artists|default('') }}">
    </div>

    <!-- Already listened genres -->
    <div class="mb-3">
        <label for="listened_genres" class="form-label"><strong>What genres do you already listen to? (Select any)</strong></label>
        <select multiple class="form-select" id="listened_genres" name="listened_genres">
            {% for genre in listened_options %}
                <option value="{{ genre }}" {% if genre in form_data.listened_genres %}selected{% endif %}>{{ genre }}</option>
            {% endfor %}
        </select>
        <small class="form-text text-muted">Hold Ctrl (Cmd on Mac) to select multiple genres.</small>
    </div>

    <!-- Mood -->
    <div class="mb-3">
        <label for="mood" class="form-label"><strong>What mood do you usually prefer in music?</strong></label>
        <select class="form-select" id="mood" name="mood">
            <option value="" disabled selected>Select one</option>
            {% for m in moods %}
            <option value="{{ m }}" {% if form_data.mood == m %}selected{% endif %}>{{ m }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Favorite instrument -->
    <div class="mb-3">
        <label for="instrument" class="form-label"><strong>Favorite instrument or sound?</strong></label>
        <select class="form-select" id="instrument" name="instrument">
            <option value="" disabled selected>Select one</option>
            {% for inst in instruments %}
            <option value="{{ inst }}" {% if form_data.instrument == inst %}selected{% endif %}>{{ inst }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Favorite decade -->
    <div class="mb-3">
        <label for="decade" class="form-label"><strong>Which decade's music do you enjoy the most?</strong></label>
        <select class="form-select" id="decade" name="decade">
            <option value="" disabled selected>Select one</option>
            {% for d in decades %}
            <option value="{{ d }}" {% if form_data.decade == d %}selected{% endif %}>{{ d }}</option>
            {% endfor %}
        </select>
    </div>

	<button type="submit" class="btn btn-green mt-3">Get Recommendations</button>
</form>

{% if recommendations %}
<hr>
<h3>Your Personalized Recommendations</h3>
<ul>
    {% for rec in recommendations %}
        <li>{{ rec }}</li>
    {% endfor %}
</ul>
{% endif %}

{% endblock %}
